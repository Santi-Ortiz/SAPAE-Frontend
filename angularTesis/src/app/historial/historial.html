
    <!-- Contenido acad√©mico (solo si hay datos) -->
    <ng-container *ngIf="historial.materias?.length">
      <h1> Progreso Acad√©mico </h1>
      <!-- Barra de progreso -->
      <div class="resumen-info">
        <div class="info-bloque">
          <div class="valor">{{ historial.promedio }}</div>
          <div class="titulo">Promedio</div>
        </div>
        <div class="info-bloque">
          <div class="valor">{{ historial.semestre }}</div>
          <div class="titulo">Semestre</div>
        </div>
        <div class="progress-bar-section">
          <div class="progress-titulo">
            <h3>Porcentaje de Avance</h3>
          </div>
          <div class="progress-container">
            <div class="progress-bar" [style.width.%]="historial.porcentaje">
              {{ historial.porcentaje?.toFixed(2) || '0.00' }}%
            </div>
          </div>
        </div>
      </div>  

      <div class="resumen-grid">
        <div class="creditos-seccion">
          <h3>Cr√©ditos Faltantes</h3>
          <div class="creditos-grid">
            <div class="cuadro-credito">
              <h3>N√öCLEO</h3>
              <p>{{ (historial.creditosFaltantes || 0) - (historial.faltanElectiva || 0) - (historial.faltanComplementaria || 0) - (historial.faltanEnfasis || 0) - (historial.faltanElectivaBasicas || 0) -  (historial.faltanEnfasisTesis || 0)}} cr√©ditos</p>
            </div>
            <div class="cuadro-credito">
              <h3>ELECTIVAS</h3>
              <p>{{ historial.faltanElectiva }} cr√©ditos</p>
            </div>
            <div class="cuadro-credito">
              <h3>COMPLEMENTARIAS</h3>
              <p>{{ historial.faltanComplementaria }} cr√©ditos</p>
            </div>
            <div class="cuadro-credito">
              <h3>√âNFASIS</h3>
              <p>{{ (historial.faltanEnfasis || 0) + (historial.faltanEnfasisTesis || 0) }} cr√©ditos</p>
            </div>
            <div class="cuadro-credito">
              <h3>ELECTIVA CIENCIAS B√ÅSICAS</h3>
              <p>{{ historial.faltanElectivaBasicas }} cr√©ditos</p>
            </div>
          </div>
        </div>

        <div class="creditos-seccion">
  <h3>Resumen de Cr√©ditos</h3>
  <div class="creditos-cards">
    <div class="credit-square cursados">
      <div class="credit-value">{{ historial.creditosCursados }}</div>
      <div class="credit-label">Cr√©ditos Cursados</div>
    </div>

    <div class="credit-square faltantes">
      <div class="credit-value">{{ historial.creditosFaltantes }}</div>
      <div class="credit-label">Cr√©ditos Faltantes</div>
    </div>

    <div class="credit-square cursando">
      <div class="credit-value">{{ historial.creditosCursando }}</div>
      <div class="credit-label">Cr√©ditos en Curso</div>
    </div>
  </div>
</div>

      </div>

      <div>
        <p class="disclaimer">
          <strong>üí° Importante:</strong> Las materias que tienes <strong>en curso</strong> aparecen en los cr√©ditos faltantes hasta que las apruebes. Una vez aprobadas, sus cr√©ditos se descontar√°n autom√°ticamente del total faltante.
        </p>
      </div>
  
      <!-- Requisitos -->
      <div class="resumen-grid1">
        <div class="requisitos-container" *ngIf="requisitosProcesados.length">
          <h3>Requisitos de Grado</h3>
          <ul class="requisitos-lista">
            <li *ngFor="let requisito of requisitosProcesados">
              <span class="check-icon">{{ requisito.cumplido ? '‚úî' : '‚úò' }}</span>
              <span class="benefit-text">{{ requisito.nombre }}</span>
            </li>
          </ul>
        </div>              
      </div>
  
      <!-- Materias que faltan -->
      <div *ngIf="historial.listaMateriasFaltantes?.length" class="faltantes-container">
        <h3>Materias Faltantes</h3>
        <table class="faltantes">
          <tbody>
            <tr *ngFor="let mat of historial.listaMateriasFaltantes">
              <td>{{ mat.nombre }}</td>
              <td>{{ mat.creditos }} cr√©ditos</td> 
              <td>{{ mat.codigo }}</td>
            </tr>
          <tbody>
        </table>
      </div>
  
      <!-- Historial de cursos -->
      <div *ngIf="historial.materias?.length" class="tabla-materias">
        <h3>Historial de Cursos</h3>
        <table>
          <thead>
            <tr>
              <th>Ciclo</th>
              <th>Materia</th>
              <th>N¬∞ Cat</th>
              <th>Curso</th>
              <th>T√≠tulo</th>
              <th>Calif</th>
              <th>Cred</th>
              <th>Tipo</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let m of materiasVisibles">
              <td>{{ m.cicloLectivo }}</td>
              <td>{{ m.materia }}</td>
              <td>{{ m.numeroCat }}</td>
              <td>{{ m.curso }}</td>
              <td>{{ m.titulo }}</td>
              <td [ngClass]="{'sin-calificacion': m.calif === 'SIN CALIFICACI√ìN'}">
                {{ m.calif === 'SIN CALIFICACI√ìN' ? 'üîÑ' : m.calif }}
              </td>
              <td>{{ m.cred }}</td>
              <td>{{ m.tipo }}</td>
            </tr>
          </tbody>
        </table>
        
        <!-- Bt√≥n ver m√°s registros-->
        <div class="centrar-boton" *ngIf="historial.materias.length > 5" style="margin-top: 10px;">
          <button (click)="mostrarTodasMaterias = !mostrarTodasMaterias">
            {{ mostrarTodasMaterias ? 'Ver menos' : 'Ver m√°s' }}
          </button>
        </div>

        <!-- Tablas extra (electivas, enfasis, complementarias) -->
        <div *ngFor="let tabla of tablasExtra">
          <div *ngIf="tabla.lista?.length">
            <h3>{{ tabla.titulo }}</h3>
            <table>
              <thead>
                <tr>
                  <th class="extra">Ciclo</th>
                  <th class="extra">Materia</th>
                  <th class="extra">N¬∞ Cat</th>
                  <th class="extra">Curso</th>
                  <th class="extra">T√≠tulo</th>
                  <th class="extra">Calif</th>
                  <th class="extra">Cred</th>
                  <th class="extra">Tipo</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let m of tabla.lista">
                  <td>{{ m.cicloLectivo }}</td>
                  <td>{{ m.materia }}</td>
                  <td>{{ m.numeroCat }}</td>
                  <td>{{ m.curso }}</td>
                  <td>{{ m.titulo }}</td>
                  <td [ngClass]="{'sin-calificacion': m.calif === 'SIN CALIFICACI√ìN'}">
                    {{ m.calif === 'SIN CALIFICACI√ìN' ? 'üîÑ' : m.calif }}
                  </td>
                  <td>{{ m.cred }}</td>
                  <td>{{ m.tipo }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>              
    </div> 
    </ng-container>

  