<div class="historial-container">
  <section class="titulo-historial">
    <h1>Historial de Simulaciones</h1>
    <p>Aquí puedes ver todas las simulaciones que has guardado.</p>
    
  </section>

  <section class="simulaciones-lista" *ngIf="simulacionesGuardadas.length > 0">
    <div class="simulacion-card" *ngFor="let simulacion of simulacionesGuardadas">
      <div class="card-header">
        <h3>{{ simulacion.nombre }}</h3>
        <span class="fecha">{{ formatearFecha(simulacion.fechaCreacion) }}</span>
      </div>
      
      <div class="card-body">
        <div class="parametros-grid">
          <div class="parametro">
            <span class="label">Semestres simulados:</span>
            <span class="value">{{ simulacion.parametros.semestres }}</span>
          </div>
          <div class="parametro">
            <span class="label">Tipo de matrícula:</span>
            <span class="value">{{ simulacion.parametros.tipoMatricula }}</span>
          </div>
          <div class="parametro">
            <span class="label">Máx. créditos:</span>
            <span class="value">{{ simulacion.parametros.creditos }}</span>
          </div>
          <div class="parametro">
            <span class="label">Máx. materias:</span>
            <span class="value">{{ simulacion.parametros.materias }}</span>
          </div>
        </div>
      </div>
      
      <div class="card-actions">
        <button class="btn-ver" (click)="verSimulacion(simulacion)">Ver Simulación</button>
        <button class="btn-eliminar" (click)="eliminarSimulacion(simulacion)">Eliminar</button>
      </div>
    </div>
  </section>

  <section> 
    <div class="botones-navegacion">
      <button class="btn-primario" (click)="volverSimulacion()"> Nueva Simulación</button>
      <button class="btn-secundario" (click)="limpiarHistorial()" *ngIf="simulacionesGuardadas.length > 0">Limpiar Historial</button>
    </div>
  </section>
  <section class="historial-vacio" *ngIf="simulacionesGuardadas.length === 0">
    <div class="mensaje-vacio">
      <i class="fas fa-history"></i>
      <h2>No tienes simulaciones guardadas</h2>
      <p>Cuando realices una simulación y la guardes, aparecerá aquí para que puedas revisarla cuando quieras.</p>
    </div>
  </section>
</div>

<!-- Modal para eliminar simulación -->
<div class="modal-backdrop" *ngIf="mostrarModalEliminar">
  <div class="modal-custom">
    <h3>Eliminar simulación</h3>
    <p>¿Estás seguro de que deseas eliminar la simulación <strong>"{{ simulacionAEliminar?.nombre }}"</strong>?</p>
    <p>Esta acción no se puede deshacer.</p>
    <div class="modal-buttons">
      <button class="btn-cancelar" (click)="mostrarModalEliminar = false">Cancelar</button>
      <button class="btn-eliminar" (click)="confirmarEliminacion()">Eliminar</button>
    </div>
  </div>
</div>

<!-- Modal para limpiar historial -->
<div class="modal-backdrop" *ngIf="mostrarModalLimpiar">
  <div class="modal-custom">
    <h3>Limpiar historial</h3>
    <p>¿Estás seguro de que deseas eliminar <strong>todas las simulaciones guardadas</strong>?</p>
    <p>Esta acción no se puede deshacer.</p>
    <div class="modal-buttons">
      <button class="btn-cancelar" (click)="mostrarModalLimpiar = false">Cancelar</button>
      <button class="btn-eliminar" (click)="confirmarLimpiarHistorial()">Limpiar todo</button>
    </div>
  </div>
</div>
