<div class="contenedor-autenticacion">
  <!-- Elementos decorativos de fondo (sin animaciones) -->
  <div class="decorative-background">
    <div class="floating-icon icon-1"><i class="fa-solid fa-graduation-cap"></i></div>
    <div class="floating-icon icon-2"><i class="fa-solid fa-book"></i></div>
    <div class="floating-icon icon-3"><i class="fa-solid fa-user-graduate"></i></div>
    <div class="floating-icon icon-4"><i class="fa-solid fa-star"></i></div>
    <div class="floating-icon icon-5"><i class="fa-solid fa-lightbulb"></i></div>
    <div class="floating-icon icon-6"><i class="fa-solid fa-trophy"></i></div>
    <div class="floating-icon icon-7"><i class="fa-solid fa-chart-line"></i></div>
    <div class="floating-icon icon-8"><i class="fa-solid fa-calendar-days"></i></div>

    <div class="geometric-shape shape-1"></div>
    <div class="geometric-shape shape-2"></div>
    <div class="geometric-shape shape-3"></div>
    <div class="geometric-shape shape-4"></div>
    <div class="geometric-shape shape-5"></div>
    <div class="geometric-shape shape-6"></div>

    <div class="floating-circle circle-1"></div>
    <div class="floating-circle circle-2"></div>
    <div class="floating-circle circle-3"></div>
    <div class="floating-circle circle-4"></div>
  </div>

  <div class="tarjeta-autenticacion">
    <h2 class="titulo">Registrarse</h2>

    <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
      <label>Primer nombre*</label>
      <input type="text" name="primerNombre" formControlName="primerNombre"
        [class.input-error]="getErrorMessage('primerNombre')" class="input-estilizado"
        placeholder="Ingrese su primer nombre" required />
      <small *ngIf="getErrorMessage('primerNombre')" class="mensaje-error">
        {{ getErrorMessage('primerNombre') }}
      </small>

      <label>Segundo nombre (Opcional)</label>
      <input type="text" name="segundoNombre" formControlName="segundoNombre" class="input-estilizado"
        placeholder="Ingrese su segundo nombre" />

      <label>Primer apellido*</label>
      <input type="text" name="primerApellido" formControlName="primerApellido"
        [class.input-error]="getErrorMessage('primerApellido')" class="input-estilizado"
        placeholder="Ingrese su primer apellido" required />
      <small *ngIf="getErrorMessage('primerApellido')" class="mensaje-error">
        {{ getErrorMessage('primerApellido') }}
      </small>

      <label>Segundo apellido*</label>
      <input type="text" name="segundoApellido" formControlName="segundoApellido" class="input-estilizado"
        placeholder="Ingrese su segundo apellido" [class.input-error]="getErrorMessage('segundoApellido')" required />
      <small *ngIf="getErrorMessage('segundoApellido')" class="mensaje-error">
        {{ getErrorMessage('segundoApellido') }}
      </small>

      <label>Código estudiantil*</label>
      <input type="text" formControlName="codigo" class="input-estilizado" placeholder="Ej: 12345678"
        [class.input-error]="getErrorMessage('codigo')" />
      <small *ngIf="getErrorMessage('codigo')" class="mensaje-error">
        {{ getErrorMessage('codigo') }}
      </small>

      <label>Carrera*</label>
      <select formControlName="carrera" class="input-estilizado select-estilizado"
        [class.input-error]="getErrorMessage('carrera')">
        <option value="" disabled>Seleccione su carrera</option>
        <option *ngFor="let carrera of carreras" [value]="carrera">
          {{ carrera }}
        </option>
      </select>
      <small *ngIf="getErrorMessage('carrera')" class="mensaje-error">
        {{ getErrorMessage('carrera') }}
      </small>

      <label>Año de ingreso*</label>
      <input type="number" formControlName="anioIngreso" class="input-estilizado" placeholder="Ej: 2020"
        [class.input-error]="getErrorMessage('anioIngreso')" />
      <small *ngIf="getErrorMessage('anioIngreso')" class="mensaje-error">
        {{ getErrorMessage('anioIngreso') }}
      </small>

      <label>Correo electrónico institucional*</label>
      <input type="email" name="correo" formControlName="correo" class="input-estilizado"
        placeholder="ejemplo@javeriana.edu.co" [class.input-error]="getErrorMessage('correo')" required />
      <small *ngIf="getErrorMessage('correo')" class="mensaje-error">
        {{ getErrorMessage('correo') }}
      </small>

      <label>Contraseña*</label>
      <div class="grupo-input">
        <i class="fa-solid fa-lock icono"></i>
        <input [type]="mostrarLaContrasena ? 'text' : 'password'" name="clave" formControlName="contrasenia"
          class="input-estilizado" placeholder="Ingrese al menos 5 caracteres" />
        <i class="fa-solid icono icono-ojo" [ngClass]="mostrarLaContrasena ? 'fa-eye' : 'fa-eye-slash'"
          (click)="mostrarContrasena()" title="Mostrar/Ocultar contraseña"></i>
      </div>
      <small *ngIf="getErrorMessage('contrasenia')" class="mensaje-error">
        {{ getErrorMessage('contrasenia') }}
      </small>

      <label>Confirme su contraseña*</label>
      <div class="grupo-input">
        <i class="fa-solid fa-lock icono"></i>
        <input [type]="mostrarLaConfirmarContrasena ? 'text' : 'password'" formControlName="confirmarContrasenia"
          class="input-estilizado" placeholder="Confirme la contraseña"
          [class.input-error]="getErrorMessage('confirmarContrasenia') || hasPasswordMismatch()" />
        <i class="fa-solid icono icono-ojo" [ngClass]="mostrarLaConfirmarContrasena ? 'fa-eye' : 'fa-eye-slash'"
          (click)="mostrarConfirmarContrasena()" title="Mostrar/Ocultar contraseña"></i>
      </div>
      <small *ngIf="getErrorMessage('confirmarContrasenia')" class="mensaje-error">
        {{ getErrorMessage('confirmarContrasenia') }}
      </small>
      <small *ngIf="hasPasswordMismatch()" class="mensaje-error">
        Las contraseñas no coinciden
      </small>

      <small *ngIf="error" class="mensaje-error">{{ error }}</small>

      <span class="campo-requerido">*Campos requeridos</span>

      <button type="submit" class="boton-principal" [disabled]="loading || registroForm.invalid">
        <span *ngIf="!loading">Registrarse</span>
        <span *ngIf="loading">Registrando...</span>
      </button>

      <p class="cambio-autenticacion">
        ¿Ya tiene una cuenta?
        <button type="button" class="boton-secundario-link" (click)="irALogin()">
          Inicie sesión
        </button>
      </p>
    </form>
  </div>

  <div class="modal-backdrop" *ngIf="mostrarModalError">
    <div class="modal-error">
      <div class="modal-header-error">
        <i class="fa-solid fa-circle-exclamation icono-error"></i>
        <h3>{{ tituloModalError }}</h3>
      </div>
      <div class="modal-body-error">
        <p>{{ mensajeModalError }}</p>
      </div>
      <div class="modal-footer-error">
        <button class="btn-cerrar-modal" (click)="cerrarModal()">
          Entendido
        </button>
      </div>
    </div>
  </div>
</div>