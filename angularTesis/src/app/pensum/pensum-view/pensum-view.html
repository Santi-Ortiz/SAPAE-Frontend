<div #contenedor class="pensum-container">
  <div class="pensum-column">
    <h1>Avance en el plan de estudios</h1>
    <p>
      Visualiza tu plan de estudios y el avance de las materias que has cursado.
      Las asignaturas se activan según tus prerequisitos y, al hacer clic en una,
      verás qué otras dependen de ella.
    </p>

    <div class="semestres">
      
      <!-- Materias cursadas (ORÍGENES) -->
      <div class="semestre-columna" *ngFor="let grupo of agruparPorSemestre(soloMaterias)">
        <h3>Semestre {{ grupo.semestre }}</h3>

        <div
          class="caja"
          *ngFor="let materia of grupo.materias"
          [attr.id]="getCodigo(materia).toString().padStart(6,'0')"               
          [attr.data-semestre]="grupo.semestre"
          [attr.data-requisitos]="'[]'"     
          (click)="seleccionarMateria(getCodigo(materia))"            
          [ngClass]="{ 'bloqueada': esMateriaBloqueada(materia) }"
        >
          <strong>{{ materia.titulo }}</strong>
          <span class="codigo">{{ getCodigo(materia) }}</span> 
          <span class="creditos">{{ materia.cred }} créditos</span>
        </div>
      </div>

      <!-- Materias faltantes (DESTINOS) -->
      <div class="semestre-columna" *ngFor="let grupo of materiasFaltantes">
        <h3>Semestre {{ grupo.semestre }}</h3>

        <div
          class="caja"
          *ngFor="let materia of grupo.materias"
          [attr.id]="getCodigo(materia).toString().padStart(6,'0')"                     
          [attr.data-semestre]="grupo.semestre"
          (click)="seleccionarMateria(getCodigo(materia))"  
          [attr.data-requisitos]="getRequisitosJson(materia.codigo)"
        >
          <strong>{{ materia.nombre }}</strong>
          <span class="codigo">{{ getCodigo(materia) }}</span> 
          <span class="creditos">{{ materia.creditos }} créditos</span>
        </div>
      </div>
    </div>
    <svg #svgRef class="svg-lines"></svg>
    <div *ngIf="mostrarMensaje"
        class="mensaje-pop"
        [style.right.px]="mensajeX"
        [style.top.px]="mensajeY">
      {{ mensajeSinRequisitos }}
    </div>    
  </div>

</div>


